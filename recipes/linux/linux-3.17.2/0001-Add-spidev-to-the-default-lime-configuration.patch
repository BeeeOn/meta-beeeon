From 3eaf55fa7efe7876bb04161cae157f72abcfa0b1 Mon Sep 17 00:00:00 2001
From: Tomas Novotny <tomas.novotny@tbs-biometrics.com>
Date: Fri, 20 Jun 2014 17:23:47 +0200
Subject: [PATCH] Add spidev to the default lime configuration

Because we have a spidev device.

Signed-off-by: Tomas Novotny <novotny@rehivetech.com>
---
 arch/arm/boot/dts/sun4i-a10-olinuxino-lime.dts | 12 ++++++++++++
 drivers/spi/spidev.c                           |  1 +
 2 files changed, 13 insertions(+)

diff --git a/arch/arm/boot/dts/sun4i-a10-olinuxino-lime.dts b/arch/arm/boot/dts/sun4i-a10-olinuxino-lime.dts
index 84d3a60..68febb9 100644
--- a/arch/arm/boot/dts/sun4i-a10-olinuxino-lime.dts
+++ b/arch/arm/boot/dts/sun4i-a10-olinuxino-lime.dts
@@ -43,6 +43,18 @@
 			status = "okay";
 		};
 
+		spi2: spi@01c17000 {
+			pinctrl-names = "default";
+			pinctrl-0 = <&spi2_pins_b>;
+			status = "okay";
+
+			spidev@0x00 {
+				compatible = "linux,spidev";
+				spi-max-frequency = <1000000>;
+				reg = <0>;
+			};
+		};
+
 		usbphy: phy@01c13400 {
 			usb1_vbus-supply = <&reg_usb1_vbus>;
 			usb2_vbus-supply = <&reg_usb2_vbus>;
diff --git a/drivers/spi/spidev.c b/drivers/spi/spidev.c
index e3bc23b..1a0c41e 100644
--- a/drivers/spi/spidev.c
+++ b/drivers/spi/spidev.c
@@ -656,6 +656,7 @@ static int spidev_remove(struct spi_device *spi)
 
 static const struct of_device_id spidev_dt_ids[] = {
 	{ .compatible = "rohm,dh2228fv" },
+	{ .compatible = "linux,spidev" },
 	{},
 };
 
-- 
1.7.12.4

